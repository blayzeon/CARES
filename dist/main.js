(()=>{"use strict";const e=JSON.parse('{"accounts":[{"account":"default","policies":["false","false","false","false"],"bna":{"status":"LEC/Inactive","type":"","indicator":"Not Indicated","crBlock":"false","ccBlock":"false","name1":"","name2":"","address1":"","address2":"","zip":"","city":"","state":"","phone1":"","phone2":"","email":"","tax":"","passcode":"","notes":"","au":"","lec":"","facility":""},"comments":[],"transactions":[],"calls":[]},{"account":"8004838314","policies":["true","true","true","true"],"bna":{"status":"Blocked","type":"Advance Pay","indicator":"Land Line","crBlock":"true","ccBlock":"true","name1":"AP","name2":"IVR","address1":"PO BOX 1234","address2":"","zip":"12345","city":"Reston","state":"VA","phone1":"8004838314","phone2":"","email":"","tax":"","passcode":"0000","notes":"IVR NUMBER - DO NOT SET UP","au":"NONE","lec":"Global Tel Link","facility":"CA_DOC-Valley State Prison (CA28)"},"comments":[["11/20/2017","CARES User kristine.carter accessed the account"],["07/12/2021","CARES User kristine.carter accessed the account"],["02/28/2022","CARES User kristine.carter accessed the account"]],"transactions":[{"calc":"add","date":"11/20/2017","type":"NewAccount","addedBy":"kristine.carter","amount":"0.00","comment":"","ccAuths":"false","refundable":"false"},{"calc":"add","date":"07/12/2021","type":"Deposit","addedBy":"AdvancePayPortal","amount":"25.00","comment":"MTCN 5930627808142558","ccAuths":"false","refundable":"false"},{"calc":"sub","date":"07/13/2021","type":"AdjustmentDecrease","addedBy":"GTL\\\\kristine.carter","amount":"25.00","comment":"tf funds from 800-483-8314 to correct number of 716-893-9079","ccAuths":"false","refundable":"false"},{"calc":"add","date":"03/05/2022","type":"Deposit","addedBy":"InContactMainAdavancePayIVR","amount":"50.00","comment":"","ccAuths":{"callingSystem":"ADVANCEPAY-IVR","date":"03/05/2022","ccNum":"6666660000004444","status":"APPROVED","amount":"50.00","code1":"709002400200JC32021101421383864","code2":"077928","orderId":"D1261169088","rejectCode1":"ACCEPT","rejectCode2":"000","vendor1":"ReD","vendor2":"Vantiv","transactionType1":"Post-Auth","transactionType2":"Payment","exp":"1230"},"refundable":"true"}],"calls":[["02/27/2022","CA28","5596630999","","0m 0s","0.00","0.00","L2","85","9","H"]]}],"facilities":[{"subId":"CA28","fName":"CA_DOC-Valley State Prison","siteId":"5661","costCenter":"CA28","inmateSystem":"Focus Centralized HMP","phoneSystem":"GTL","rate":"0.03","fee":"0.00"}],"addresses":[{"address1":"5959 CORPORATE DR","address2":"","zip":"77036","city":"HOUSTON","state":"TX"},{"address1":"PO BOX 1234","address2":"","zip":"01001","city":"AGAWAM","state":"MA"}]}'),t=function(e,t=!1,n=[],i=[],a=!1){const o=document.createElement(e);!1!==t&&(o.innerHTML=t);for(let e=0;e<n.length;e+=1)o.setAttribute(n[e][0],n[e][1]);for(let e=0;e<i.length;e+=1)o.classList.add(i[e]);if(!1===a)return o;a.appendChild(o)},n=document.querySelector("#maincontent"),i=e;let a=!1;const o=(new Date).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"});function d(){alert("yes")}function c(e,t=!0){for(;e.firstChild;)e.removeChild(e.lastChild);!0===t&&e.remove()}function s(e,t,n="OK",i="Cancel",a=d,o=["popup"]){const s=document.createElement("div");s.setAttribute("id","fader");const l=document.createElement("div");for(let e=0;e<o.length;e+=1)l.classList.add(o[e]);const r=document.createElement("div");r.classList.add("grab"),r.innerHTML=`<strong>ðŸ“‘ ${e}</strong>`;const p=document.createElement("span"),u=document.createElement("div");u.classList.add("flex-col"),u.classList.add("margin-bottom"),u.appendChild(t);const h=document.createElement("div"),m=document.createElement("button");m.innerText=n;const C=document.createElement("button");C.innerText=i,l.appendChild(r),p.appendChild(u),h.appendChild(m),h.appendChild(C),h.classList.add("flex"),p.appendChild(h),l.appendChild(p);const b=document.body;function v(){c(s),c(l)}b.appendChild(s),b.appendChild(l),m.addEventListener("click",(()=>{a(),v()})),C.addEventListener("click",(()=>{v()})),r.addEventListener("mousedown",(e=>{!function(e){let t=!0;const n=e.clientWidth/2;e.clientHeight,onmousemove=function(i){!0===t&&(e.style.left=i.clientX-n+"px",e.style.top=`${i.clientY}px`)},onmouseup=function(){t=!1}}(l)}))}const l=document.querySelector("#sidebar");t("label","Phone Number: ",[],[],l);const r=t("input",!1,[["type","text"]],[]);l.appendChild(r);const p=t("button","Lookup");l.appendChild(p),t("a","Advanced Search",[["href","#"]],[],l),t("a","LEC Credit",[["href","#"]],[],l),t("div","Links",[],["navy-bg","ff-tnr","margin-top"],l),t("a","Master Facility list",[["href","#"]],[],l),t("a","Refund Form",[["href","#"]],[],l),t("a","Research Page",[["href","#"]],[],l),t("a","Connect Network",[["href","#"]],[],l),t("a","CN Site Info",[["href","#"]],[],l),t("a","Facility Services",[["href","#"]],[],l);const u=t("a","CC Deposit",[["href","#"]],[]);l.appendChild(u);const h=t("a","Create Account",[["href","#"]],[]);function m(e,t="load"){const n=function(e){const t=e.transactions;let n=0;for(let e=0;e<t.length;e+=1)"add"===t[e].calc?n+=parseFloat(t[e].amount):n-=parseFloat(t[e].amount);return n.toFixed(2)}(e);function i(){const t=document.querySelector("#account-comments");let n="";for(let t=0;t<e.comments.length;t+=1)n=`<tr><td>${e.comments[t][0]}</td><td>new.trainee ${e.comments[t][1]}</td></tr>`+n;t.innerHTML=`<table><thead><tr><th>Date</th><th>Comment</th></tr></thead><tbody>${n}</body></table>`}var a;"load"===t?(function(){for(let t in e.bna)document.getElementById("nav-alert").innerText=`Advance Pay account ${r.value} loaded successfully.`,document.querySelector(`#${t}`).value=e.bna[t];document.querySelectorAll('[data="balance"]').forEach((e=>{e.innerText=`$${n}`}))}(),i()):"save"===t?function(){for(let t in e.bna)e.bna[t]=document.querySelector(`#${t}`).value}():(a=t,e.comments.push([o,a]),i())}l.appendChild(h),r.addEventListener("keyup",(()=>{const e=r.value.split(""),t=e[e.length-1];return e.pop(),t.match(/^[0-9]+$/)?void 0:void(r.value=e.join(""))})),p.addEventListener("click",(()=>{for(let e=0;e<i.accounts.length;e+=1)if(r.value===i.accounts[e].account){a=i.accounts[e];const t=document.getElementById("pcl-btn");return a.policies.toString()===[!0,!0,!0,!0].toString()?t.setAttribute("style","background: rgb(114, 163, 213"):t.removeAttribute("style"),void m(a)}const e=i.accounts.length;i.accounts.push({account:r.value,policies:["false","false","false","false"],bna:{status:"LEC/Inactive",type:"",indicator:"Not Indicated",crBlock:"false",ccBlock:"false",name1:"",name2:"",address1:"",address2:"",zip:"",city:"",state:"",phone1:r.value,phone2:"",email:"",tax:"",passcode:"",notes:"",au:"",lec:"",facility:""},comments:[],transactions:[],calls:[]});const t=document.createElement("span");t.innerHTML="Account not found. Would you like to create one?&nbsp";const n=document.createElement("button");n.innerText="Create Account";const o=document.getElementById("nav-alert");o.innerHTML="",o.appendChild(t),o.appendChild(n),n.addEventListener("click",(()=>{""!==document.getElementById("type").value?(a=i.accounts[e],m(a),m(a,"accessed the account")):alert("Please select an account type.")}))})),function(){function e(){document.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")})),this.classList.add("active"),console.log(this.innerText)}function i(){document.querySelectorAll(".active2").forEach((e=>{e.classList.remove("active2")})),this.classList.add("active2"),console.log(this.innerText)}const a=t("div"),o=t("div",!1,[["id","nav-extraC"]],["blue2-bg"]),d=t("p","&nbsp",[["id","nav-alert"]]),c=["CC Deposit","Other Deposit","Withdrawal","Funds Transfer","Adj Increase","Adj Decrease","Chargeback","Ret Check"];for(let e=0;e<c.length;e+=1){0===e&&t("span","Add (",[],[],a);const n=t("a",c[e],[["href","#"]]);n.addEventListener("click",i),a.appendChild(n),t("span",e===c.length-1?")":" |&nbsp",[],[],a)}o.appendChild(d),o.appendChild(a);const s=["Account Summary","Transactions","Refund","Transaction Summary","CC Auths","Call Records","TAG Comments","Statements","Auto Reload","Alerts"],l=t("div",!1,[["id","nav-container"]],["blue1-bg"]);for(let n=0;n<s.length;n+=1){const i=t("a",s[n],[["href","#"]]);i.addEventListener("click",e),0===n&&i.classList.add("active"),l.appendChild(i)}n.appendChild(l),n.appendChild(o)}(),function(){const e=t("ul",!1,[["id","as-container"]]),o=t("li"),d=(t("select",'<option>Active</option><option>Returned Mail</option><option selected="true">LEC/Inactive</option><option>Blocked</option>',[["id","status"]],[],o),t("div"));t("label","Account Type: ",[],[],d),t("select","<option></option><option>Advance Pay</option><option>Direct Bill</option><option>Friends and Family</option><option>APOC</option>",[["id","type"]],[],d),o.appendChild(d);const l=t("div");t("img",!1,[["src","./img/info_italic.png"]],[],l),t("button","Show Contract Exceptions",[],[],l),o.appendChild(l);const r=t("li"),p=t("div");t("label","Phone Indicator: ",[["id","indicator"]],[],p),t("select","<option>Cell Phone</option><option>Land Line</option><option>No Override</option><option>Not Indicated</option><option>Block</option>",[],[],p),r.appendChild(p),t("img",!1,[["src","./img/info_italic.png"]],[],r);const u=t("div");t("label","Validation Surcharge: ",[],[],u),t("select","<option>Not Indicated</option><option>Yes</option><option>No</option>",[],[],u),r.appendChild(u);const h=t("div");t("label","Special Rate: ",[],[],h),t("select",!1,[["disabled","true"]],[],h),r.appendChild(h);const C=t("li");t("label","Customer Block Requested: ",[["id","crBlock"]],[],C),t("input",!1,[["type","checkbox"]],[],C);const b=t("li");t("label","<strong>Available: </strong>",[],[],b),t("span","$0.00",[["data","balance"]],[],b),t("label","<strong>Ledger: </strong>",[],[],b),t("span","$0.00",[["data","balance"]],[],b),t("label","<strong>Hold Amount: </strong>",[],[],b),t("span","$0.00",[["data","balance"]],[],b),t("label","<strong>Liability Limit: </strong>",[],[],b),t("span","$0.00",[],[],b);const v=t("li"),f=t("div");t("label","Send Bill: ",[],[],f),t("select","<option>No Export</option>",[["disabled","true"]],[],f),v.appendChild(f);const A=t("div");t("label","Facility Rates: ",[],[],A),t("select","<option></option><option>California Department of Corrections</option>",[["disabled","true"]],[],A),t("button","View Rates",[],[],A),v.appendChild(A);const y=t("li"),g=t("div");t("label","Credit Card Block: ",[["id","ccBlock"]],[],g),t("input",!1,[["type","checkbox"]],[],g),y.appendChild(g);const E=t("div");E.appendChild(o),E.appendChild(r),E.appendChild(C),E.appendChild(b),E.appendChild(v),E.appendChild(y),e.appendChild(E);const k=t("div",!1,[["id","as-bnaT"]]),L=t("div",!1,[["id","as-bnaL"]]);k.appendChild(L);const x=t("div",!1,[["id","as-bnaR"]]);k.appendChild(x);const T=t("div",!1,[["id","as-bnaB"]]),S=t("div",!1,[],["blue2-bg"]);T.appendChild(S),t("p","Account Comments",[],["strong"],S);const P=t("a","&nbsp(Add New)",[],["no-link"]);S.appendChild(P),P.addEventListener("click",(()=>{if(!1!==a){const e="Comment Type: <select>\n                    <option></option>\n                    <option>IVR</option>\n                    <option>CreditLimitChange</option>\n                    <option>Complaint</option>\n                    <option>Connect Network</option>\n                    <option>Trust</option>\n                    <option>Chargeback</option>\n                    <option>Inquiry-Payment/Balance</option>\n                    <option>Inquiry-Rates</option>\n                    <option>Inquiry-Refund/Close Account</option>\n                    <option>Account Setup</option>\n                    <option>Block Issue</option>\n                    <option>Wireless Activation Team</option>\n                    <option>Research Team</option>\n                    <option>AP International Team</option>\n                    <option>Fax Team Update</option>\n                    <option>General</option>\n            </select>",t=document.createElement("div"),n=document.createElement("label");n.innerText="Comment: ";const i=document.createElement("textarea");i.setAttribute("class","textfield"),t.appendChild(n),t.appendChild(i),function(e="#72A3D5",t,n="title",i="Add Item",a="x"){const o=document.createElement("div");o.setAttribute("class","adjustment-popup"),o.setAttribute("style",`background: ${e}`);const d=document.createElement("div"),s=document.createElement("div");s.innerHTML=n;const l=document.createElement("button");l.innerText=a,l.addEventListener("click",(()=>{c(o)})),d.appendChild(s),d.appendChild(l);const r=document.createElement("div");r.appendChild(t);const p=document.createElement("div"),u=document.createElement("button");return u.innerText=i,u.addEventListener("click",(()=>{c(o)})),p.appendChild(u),o.appendChild(d),o.appendChild(r),o.appendChild(p),document.body.appendChild(o),u}("#006699",t,e,"Add Comment").addEventListener("click",(()=>{!1!==a&&m(a,i.value)}))}}));const I=t("div",!1,[["id","account-comments"]]);function B(e,n=L,i="input"){const a=document.createElement("div");a.classList.add("input-container"),t("label",`${e}: `,[],[],a);const o=t("input",!1,[["type",i]]);return a.appendChild(o),n.appendChild(a),o}T.appendChild(I),e.appendChild(k),e.appendChild(T),n.appendChild(e);const R="./img/error.gif";B("First Name").setAttribute("id","name1"),B("Last Name").setAttribute("id","name2");const N=B("Address 1");N.setAttribute("data","address"),N.setAttribute("id","address1"),B("Address 2").setAttribute("id","address2");const D=B("Zip Code");D.setAttribute("data","address"),D.setAttribute("id","zip"),D.classList.add("half-width");const O=t("div",!1,[["id","city-state-container"]],["input-container"]);L.appendChild(O),t("label","City, State: ",[],[],O);const $=t("div",!1,[["id","city-state-sub"]],["split-input"]);O.appendChild($);const F=t("input",!1,[["type","text"],["id","city"]]);F.setAttribute("data","address"),$.appendChild(F);const w=t("input",!1,[["type","text"],["id","state"]]);w.setAttribute("data","address"),$.appendChild(w);const M=t("div"),V=t("img","false",[["src",R]]);V.setAttribute("id","addressIcon"),V.classList.add("ah-activator"),M.appendChild(V);const q=t("div",!1,[],[["popup-shape"]]),z=t("div",!1,[["id","address-validation-popup"]]);q.appendChild(z),M.appendChild(q);const H=t("div","close");H.addEventListener("click",(()=>{q.classList.toggle("visible")})),z.appendChild(H);const U=t("div","Unable to validate address.");z.appendChild(U),V.addEventListener("click",(()=>{q.classList.toggle("visible")})),$.appendChild(M),B("Phone Number").setAttribute("id","phone1"),B("Alt Number").setAttribute("id","phone2"),B("Email").setAttribute("id","email"),B("Federal Tax ID").setAttribute("id","tax"),B("IVR Passcode").setAttribute("id","passcode"),document.querySelectorAll('[data="address"]').forEach((e=>{e.addEventListener("change",(()=>{if(""!==D.value){V.removeAttribute("src");for(let n=0;n<i.addresses.length;n+=1)if(N.value.toUpperCase()===i.addresses[n].address1.toUpperCase())return D.value===i.addresses[n].zip?void(""===F.value&&""===w.value?e(n):t(n)):void t(n);U.innerText="Unable to validate address.",V.setAttribute("src",R)}function e(e){N.value=i.addresses[e].address1,F.value=i.addresses[e].city,w.value=i.addresses[e].state,D.value=i.addresses[e].zip,V.setAttribute("src","./img/yes.gif"),U.innerText="Address is valid"}function t(t){const n=`\n                    Address Found:<br>\n                    ${i.addresses[t].address1}<br>\n                    ${i.addresses[t].city}, ${i.addresses[t].state}${i.addresses[t].zip}<br>\n                    Click here to update the address.\n                `;V.setAttribute("src","./img/warning.png"),U.innerHTML=n,U.addEventListener("click",(function n(){e(t),U.removeEventListener("click",n)}))}}))}));const j=t("div",!1,[],["margin-bottom","margin-top","flex"]),G=t("button","Save Changes");G.addEventListener("click",(()=>{!1!==a&&m(a,"save")}));const W=t("button","BNA This Number");j.appendChild(G),j.appendChild(W),L.appendChild(j),B("Tax Exempt",x,"checkbox").setAttribute("disabled","true");const X=t("div",!1,[],["input-container","extra-input-width"]);t("label","Notes: ",[],[],X);const _=t("textarea",!1,[["id","notes"]]);X.appendChild(_),x.appendChild(X),B("Authorized User",x).setAttribute("id","au");const Y=B("Original LEC",x);Y.setAttribute("id","lec"),Y.setAttribute("disabled","true");const J=B("Last Facility Called",x);J.setAttribute("disabled","true"),J.setAttribute("id","facility");const K=t("div",!1,[],["input-container","extra-input-width"]);t("label","Originating Facilities: ",[],[],K);const Z=t("select",!1,[["id","origF"],["size","4"]]);K.appendChild(Z),x.appendChild(K);const Q=t("div",!1,[],["margin-top","margin-bottom"]),ee=t("button","Policy Check List",[["id","pcl-btn"]]);Q.appendChild(ee),x.appendChild(Q),ee.addEventListener("click",(()=>{const e=t("div"),n=t("div");e.appendChild(n);const i=t("input",!1,[["type","checkbox"]]);n.appendChild(i),t("label","Cell phone/VOIP setup at own risk",[],[],n);const o=t("div");e.appendChild(o);const d=t("input",!1,[["type","checkbox"]]);o.appendChild(d),t("label","Service Fees",[],[],o);const c=t("div");e.appendChild(c);const l=t("input",!1,[["type","checkbox"]]);c.appendChild(l),t("label","90 Days Account Expiration",[],[],c);const r=t("div");e.appendChild(r);const p=t("input",!1,[["type","checkbox"]]);function u(e=!0){if(!1!==a)if(!1===e)i.checked=a.policies[0],d.checked=a.policies[1],l.checked=a.policies[2],p.checked=a.policies[3];else{const e=[[i.checked,"PCCellPhone"],[d.checked,"PCServiceFees"],[l.checked,"PC90DaysAccountExpiration"],[p.checked,"PC180DaysAccountExpiration"]];for(let t=0;t<a.policies.length;t+=1)e[t][0].toString()!==a.policies[t].toString()&&(a.policies[t]=e[t][0],m(a,`updated the account attribute for ${e[t][1]} to ${e[t][0]}.`));const t=document.getElementById("pcl-btn");a.policies.toString()===[!0,!0,!0,!0].toString()?t.setAttribute("style","background: rgb(114, 163, 213"):t.removeAttribute("style")}}r.appendChild(p),t("label","180 Days Account Expiration",[],[],r),!1===a||u(!1),s("Policy Check List",e,"OK","Cancel",u)}))}()})();